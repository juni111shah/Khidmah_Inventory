<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <a routerLink="/workflows" class="btn btn-outline-secondary btn-sm"><i class="bi bi-arrow-left me-1"></i> Workflows</a>
  </div>

  <app-toast *ngIf="showToast" [message]="toastMessage" [type]="toastType" (close)="showToast = false"></app-toast>

  <app-content-loader [loading]="loading">
    <ng-container skeleton>
      <app-skeleton-detail-header [actionCount]="0" class="mb-4"></app-skeleton-detail-header>
      <app-unified-card header="" customClass="border-0 shadow-sm">
        <app-skeleton-list [itemCount]="5" [showAvatar]="false" layout="list"></app-skeleton-list>
      </app-unified-card>
    </ng-container>
    <app-unified-card *ngIf="!loading" customClass="border-0 shadow-sm">
    <div class="list-group list-group-flush">
      <div *ngFor="let p of pending" class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ p.workflowName }}</strong> – {{ p.entityType }} #{{ p.entityId | slice:0:8 }}…
          <br><small class="text-muted">Step: {{ p.currentStep }} | {{ p.currentAssigneeName }}</small>
        </div>
        <div class="d-flex align-items-center gap-2">
          <input type="text" class="form-control form-control-sm" style="width: 180px;" [(ngModel)]="comment" placeholder="Comment" />
          <app-unified-button variant="success" size="sm" (clicked)="approve(p.id)" [disabled]="approvingId === p.id">Approve</app-unified-button>
        </div>
      </div>
    </div>
    <div *ngIf="pending.length === 0" class="text-center text-muted py-4">No pending approvals.</div>
  </app-unified-card>
  </app-content-loader>
</div>
