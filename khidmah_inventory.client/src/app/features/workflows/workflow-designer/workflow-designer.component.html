<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <a routerLink="/workflows" class="btn btn-outline-secondary btn-sm"><i class="bi bi-arrow-left me-1"></i> Back</a>
  </div>

  <app-toast *ngIf="showToast" [message]="toastMessage" [type]="toastType" (close)="showToast = false"></app-toast>

  <app-unified-card header="New workflow" customClass="border-0 shadow-sm">
    <form [formGroup]="form">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" formControlName="name" placeholder="e.g. PO Approval" />
        </div>
        <div class="col-md-6">
          <label class="form-label">Entity type</label>
          <select class="form-select" formControlName="entityType">
            <option *ngFor="let e of entityTypes" [value]="e">{{ e }}</option>
          </select>
        </div>
        <div class="col-12">
          <label class="form-label">Description</label>
          <input type="text" class="form-control" formControlName="description" />
        </div>
        <div class="col-12">
          <label class="form-label">Steps (JSON)</label>
          <textarea class="form-control font-monospace" formControlName="steps" rows="6"></textarea>
          <small class="text-muted" ngNonBindable>e.g. [&#123;"stepId":"step1","name":"Submit","order":1&#125;, ...]</small>
        </div>
      </div>
    </form>
    <div class="mt-3">
      <app-unified-button variant="primary" (clicked)="save()" [disabled]="saving">{{ saving ? 'Creating...' : 'Create workflow' }}</app-unified-button>
    </div>
  </app-unified-card>
</div>
