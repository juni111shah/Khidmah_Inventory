<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <a routerLink="/automation" class="btn btn-outline-secondary btn-sm"><i class="bi bi-arrow-left me-1"></i> Back</a>
  </div>

  <app-toast *ngIf="showToast" [message]="toastMessage" [type]="toastType" (close)="showToast = false"></app-toast>

  <app-unified-card header="IF → THEN" customClass="border-0 shadow-sm">
    <form [formGroup]="form">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Rule name</label>
          <input type="text" class="form-control" formControlName="name" placeholder="e.g. Low stock → Create PO" />
        </div>
        <div class="col-md-6">
          <label class="form-label">Description</label>
          <input type="text" class="form-control" formControlName="description" />
        </div>
        <div class="col-md-6">
          <label class="form-label">IF condition</label>
          <select class="form-select" formControlName="conditionType">
            <option *ngFor="let o of conditionTypes" [value]="o.value">{{ o.label }}</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label">Condition param (e.g. threshold)</label>
          <input type="text" class="form-control" formControlName="conditionParam" placeholder="10" />
        </div>
        <div class="col-md-6">
          <label class="form-label">THEN action</label>
          <select class="form-select" formControlName="actionType">
            <option *ngFor="let o of actionTypes" [value]="o.value">{{ o.label }}</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label">Priority</label>
          <input type="number" class="form-control" formControlName="priority" min="1" />
        </div>
        <div class="col-12">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="isActive" formControlName="isActive" />
            <label class="form-check-label" for="isActive">Active</label>
          </div>
        </div>
      </div>
    </form>
    <div class="mt-3">
      <app-unified-button variant="primary" (clicked)="save()" [disabled]="saving">{{ saving ? 'Saving...' : 'Create rule' }}</app-unified-button>
    </div>
  </app-unified-card>
</div>
