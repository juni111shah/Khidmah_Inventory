<div class="sparkline-container">
  <svg [attr.viewBox]="viewBox" [attr.width]="width" [attr.height]="height" class="sparkline-svg">
    <defs>
      <linearGradient [id]="gradientId" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" [attr.stop-color]="color" stop-opacity="0.25"></stop>
        <stop offset="50%" [attr.stop-color]="color" stop-opacity="0.12"></stop>
        <stop offset="100%" [attr.stop-color]="color" stop-opacity="0.03"></stop>
      </linearGradient>
    </defs>
    <!-- Vertical bars (behind the line) -->
    <g *ngIf="showBars">
      <rect
        *ngFor="let bar of bars; let i = index"
        [attr.x]="bar.x"
        [attr.y]="bar.y"
        [attr.width]="bar.width"
        [attr.height]="bar.height"
        [attr.fill]="color"
        [attr.fill-opacity]="0.18"
        class="sparkline-bar">
      </rect>
    </g>
    <!-- Area fill (optional) -->
    <path
      *ngIf="showArea"
      [attr.d]="areaPath"
      [attr.fill]="'url(#' + gradientId + ')'"
      class="sparkline-area">
    </path>
    <!-- Line graph (on top) -->
    <path
      [attr.d]="path"
      [attr.stroke]="color"
      [attr.fill]="'none'"
      [attr.stroke-width]="2.5"
      [attr.stroke-linecap]="'round'"
      [attr.stroke-linejoin]="'round'"
      [attr.stroke-opacity]="0.85"
      class="sparkline-line">
    </path>
  </svg>
</div>

