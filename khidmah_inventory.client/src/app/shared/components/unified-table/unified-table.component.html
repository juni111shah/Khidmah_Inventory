<div class="table-container" [class.table-responsive]="responsive">
  <table [class]="tableClasses">
    <thead class="table-light" [class.sticky-top]="stickyHeader">
      <tr>
        <th *ngIf="showCheckbox" style="width: 40px;">
          <app-unified-checkbox [checked]="isAllSelected()" (change)="toggleAllSelection()"></app-unified-checkbox>
        </th>
        <th *ngFor="let column of columns" [style.width]="column.width" [style.text-align]="column.align || 'left'">
          {{ column.label }}
        </th>
        <th *ngIf="showActions" class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of paginatedData; let i = index" [class.table-primary]="isRowSelected(row)">
        <td *ngIf="showCheckbox">
          <app-unified-checkbox [checked]="isRowSelected(row)" (change)="toggleRowSelection(row)"></app-unified-checkbox>
        </td>
        <td *ngFor="let column of columns" [style.text-align]="column.align || 'left'">
          <ng-container *ngIf="column.template; else defaultValue">
            <ng-container *ngTemplateOutlet="column.template; context: { $implicit: row, column: column }"></ng-container>
          </ng-container>
          <ng-template #defaultValue>
            {{ getColumnValue(row, column) }}
          </ng-template>
        </td>
        <td *ngIf="showActions" class="text-end">
          <ng-content select="[slot=actions]"></ng-content>
        </td>
      </tr>
      <tr *ngIf="data.length === 0">
        <td [attr.colspan]="columns.length + (showCheckbox ? 1 : 0) + (showActions ? 1 : 0)" class="text-center py-4 text-muted">
          No data available
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Simple Bootstrap Pagination -->
  <nav *ngIf="pagination && totalPages > 1" class="d-flex justify-content-between align-items-center mt-4">
    <div class="small text-muted fw-medium">
      Showing <strong>{{ (currentPage - 1) * pageSize + 1 }}</strong> to <strong>{{ Math.min(currentPage * pageSize, data.length) }}</strong> of <strong>{{ data.length }}</strong> entries
    </div>
    <ul class="pagination mb-0">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="setPage(currentPage - 1)">
          <i class="bi bi-chevron-left"></i>
        </button>
      </li>
      <li class="page-item" *ngFor="let p of [].constructor(totalPages); let i = index" [class.active]="currentPage === i + 1">
        <button class="page-link" (click)="setPage(i + 1)">{{ i + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <button class="page-link" (click)="setPage(currentPage + 1)">
          <i class="bi bi-chevron-right"></i>
        </button>
      </li>
    </ul>
  </nav>
</div>
