<app-unified-card header="Component Settings Panel" customClass="settings-panel border-0 shadow-sm">
  <ul class="nav nav-tabs mb-3">
    <li class="nav-item">
      <button class="nav-link" [class.active]="activeTab === 'component'" (click)="setActiveTab('component')">Component Settings</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" [class.active]="activeTab === 'import-export'" (click)="setActiveTab('import-export')">Import/Export</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" [class.active]="activeTab === 'reset'" (click)="setActiveTab('reset')">Reset</button>
    </li>
  </ul>

  <div class="tab-content">
    <!-- Component Settings Tab -->
    <div *ngIf="activeTab === 'component'" class="tab-pane fade show active">
      <div class="row g-3">
        <div class="col-md-6">
          <app-unified-select
            label="Component Type"
            [options]="componentTypes"
            [(ngModel)]="selectedComponentType">
          </app-unified-select>
        </div>
        <div class="col-md-6">
          <app-unified-select
            label="Component ID"
            [options]="getComponentIds(selectedComponentType)"
            [(ngModel)]="selectedComponentId">
          </app-unified-select>
        </div>
        <div class="col-12 text-end">
          <app-unified-button variant="primary" (clicked)="saveComponentSettings()">
            Save Settings
          </app-unified-button>
        </div>
      </div>

      <div *ngIf="selectedComponentId" class="mt-4 p-3 bg-light border">
        <h6 class="fw-bold mb-3">Edit Settings for: {{ selectedComponentId }}</h6>
        <pre class="mb-0"><code>{{ getComponentSettings(selectedComponentType, selectedComponentId) | json }}</code></pre>
        <p class="text-muted small mt-2">Settings are automatically saved when components are used.</p>
      </div>
      
      <div *ngIf="!selectedComponentId" class="text-center py-5 text-muted">
        <p>Select a component type and ID to view/edit settings.</p>
      </div>
    </div>

    <!-- Import/Export Tab -->
    <div *ngIf="activeTab === 'import-export'" class="tab-pane fade show active">
      <div class="mb-4 pt-2">
        <h6 class="fw-bold mb-3">Export Settings</h6>
        <div class="d-flex gap-2 mb-3">
          <app-unified-button variant="primary" (clicked)="exportSettings()" icon="bi-code-square" iconLibrary="bi">Export to Text</app-unified-button>
          <app-unified-button variant="secondary" (clicked)="downloadSettings()" icon="bi-download" iconLibrary="bi">Download JSON</app-unified-button>
        </div>
        <app-unified-textarea *ngIf="exportJson" label="Exported JSON" [(ngModel)]="exportJson" [rows]="8" customClass="font-monospace small"></app-unified-textarea>
      </div>

      <hr>

      <div class="mt-4">
        <h6 class="fw-bold mb-3">Import Settings</h6>
        <app-unified-textarea label="Paste JSON here" [(ngModel)]="importJson" [rows]="8" customClass="font-monospace small"></app-unified-textarea>
        <div class="mt-2">
          <app-unified-button variant="success" (clicked)="importSettings()" icon="bi-upload" iconLibrary="bi">Import Settings</app-unified-button>
        </div>
      </div>
    </div>

    <!-- Reset Tab -->
    <div *ngIf="activeTab === 'reset'" class="tab-pane fade show active text-center py-4">
      <i class="bi bi-exclamation-triangle text-danger fs-1 mb-3"></i>
      <h6 class="fw-bold">Reset All Settings</h6>
      <p class="text-muted">This will restore all component settings to their default values.</p>
      <app-unified-button variant="danger" (clicked)="resetAllSettings()" icon="bi-trash" iconLibrary="bi">Reset Everything</app-unified-button>
    </div>
  </div>
</app-unified-card>
